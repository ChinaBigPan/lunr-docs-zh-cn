(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{352:function(t,e,_){"use strict";_.r(e);var v=_(43),n=Object(v.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"class-builder"}},[t._v("Class: Builder")]),t._v(" "),_("h2",{attrs:{id:"lunr-builder"}},[t._v("lunr.Builder()")]),t._v(" "),_("div",{staticClass:"language-js line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-js"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Builder")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[_("code",[t._v("lunr.Builder")]),t._v("对一组文档执行索引，并返回"),_("code",[t._v("lunr.index")]),t._v("的实例，以便进行查询。")]),t._v(" "),_("p",[t._v("索引的所有配置都是通过该 builder 完成的，要索引的字段、文档引用、文本处理管道和文档评分参数都要在创建索引之前在 builder 上设置好。")]),t._v(" "),_("p",[_("strong",[t._v("属性：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("属性名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("_ref")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),_("td",[t._v("文档引用字段的内部引用")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("_fields")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}}),t._v(" "),_("td",[t._v("对要建立索引的文档字段的内部引用")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("invertedIndex")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("object")]),t._v(" "),_("td",[t._v("反向索引将关键词映射到文档字段")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("documentTermFrequencies")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("object")]),t._v(" "),_("td",[t._v("跟踪文档关键词的频率")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("documentLengths")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("object")]),t._v(" "),_("td",[t._v("跟踪添加到索引中的文档的长度")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("tokenizer")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.html#.tokenizer",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.tokenizer"),_("OutboundLink")],1)]),t._v(" "),_("td",[t._v("函数，用于将字符串拆分为用于索引的关键词")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("pipeline")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.Pipeline.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.Pipeline"),_("OutboundLink")],1)]),t._v(" "),_("td",[t._v("在建立索引之前，管道对关键词执行文本处理")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("searchPipeline")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.Pipeline.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.Pipeline"),_("OutboundLink")],1)]),t._v(" "),_("td",[t._v("在查询索引之前处理搜索词的管道")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("documentCount")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("number")]),t._v(" "),_("td",[t._v("跟踪索引的文档总数")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("_b")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("number")]),t._v(" "),_("td",[t._v("控制字段长度规范化的参数，设置为"),_("code",[t._v("0")]),t._v("禁用规范化，"),_("code",[t._v("1")]),t._v("则完全规范化字段长度，默认值为"),_("code",[t._v("0.75")]),t._v("。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("_k1")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("number")]),t._v(" "),_("td",[t._v("控制关键词频率增加多快导致关键词频率饱和的参数，默认值为1.2。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("termIndex")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("number")]),t._v(" "),_("td",[t._v("针对每个唯一关键词递增的计数器，用于标识关键词在向量空间中的位置。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("metadataWhitelist")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("array")]),t._v(" "),_("td",[t._v("已列入白名单索引的元数据键列表。")])])])]),t._v(" "),_("h2",{attrs:{id:"方法"}},[t._v("方法")]),t._v(" "),_("h3",{attrs:{id:"add-doc-attributes"}},[_("code",[t._v("add(doc, attributes)")])]),t._v(" "),_("p",[t._v("将文档添加到索引中。")]),t._v(" "),_("p",[t._v("在向索引中添加字段之前，索引应该已经设置完全，文档 ref 和要索引的所有字段都已经指定。")]),t._v(" "),_("p",[t._v("文档必须有 ref 指定的字段名(默认情况下是'id')，它应该为索引定义所有字段，尽管"),_("code",[t._v("null")]),t._v("或"),_("code",[t._v("undefined")]),t._v("的值不会导致错误。")]),t._v(" "),_("p",[t._v("可以在构建时对整个文档提升权重(boost)。对文档提升权重表示该文档在搜索结果中的排名应该高于其他文档。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("doc")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("object")]),t._v(" "),_("td",[t._v("要添加到索引的文档")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("attributes")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("object")]),t._v(" "),_("td",[t._v("与此文档关联的可选属性。"),_("br"),_("br"),t._v("- "),_("code",[t._v("boost")]),t._v(" number 默认值是"),_("code",[t._v("1")]),t._v("。向文档中所有关键词引用权重。")])])])]),t._v(" "),_("h3",{attrs:{id:"b-number"}},[_("code",[t._v("b(number)")])]),t._v(" "),_("p",[t._v("用于调整计算相关性分数时对文档及其字段长度的重视程度的参数。值必须在"),_("code",[t._v("0")]),t._v(" ~ "),_("code",[t._v("1")]),t._v(" 之间，默认值为"),_("code",[t._v("0.75")]),t._v("。值为"),_("code",[t._v("0")]),t._v("时将完全禁用任何规范化行为。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("number")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("number")]),t._v(" "),_("td",[t._v("设置的值")])])])]),t._v(" "),_("h3",{attrs:{id:"build-→-lunr-index"}},[_("code",[t._v("build() → {lunr.Index}")])]),t._v(" "),_("p",[t._v("构建索引值，创建 lunr.Index 的实例。")]),t._v(" "),_("p",[t._v("这就完成了索引过程，并且只有在所有文档都添加到索引中时才应该调用它。")]),t._v(" "),_("p",[_("strong",[t._v("返回值：")]),t._v(" "),_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.Index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.Index"),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"field-fieldname-attributes"}},[_("code",[t._v("field(fieldName, attributes)")])]),t._v(" "),_("p",[t._v("将自动添加到将被索引的文档字段列表中。每个被索引的文档都应该拥有这个字段。若索引文档中该字段为"),_("code",[t._v("null")]),t._v("不会导致错误，但会限制搜索检索该文档的机会。")]),t._v(" "),_("p",[t._v("在将文档添加到索引之前，应该添加所有字段。在之后添加字段将不会对已经建立索引的文档产生影响。")]),t._v(" "),_("p",[t._v("我们可以在构建时提升(boost)字段的权重。这使得该字段中的关键词在排名搜索结果时更加重要。使用字段"),_("code",[t._v("boost")]),t._v("来指定一个字段中的匹配比其他字段更重要。")]),t._v(" "),_("p",[_("strong",[t._v("参数：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("fieldName")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("number")]),t._v(" "),_("td",[t._v("设置的值")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("attributes")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("object")]),t._v(" "),_("td",[t._v("与该字段相关的配置属性"),_("br"),_("br"),t._v("- "),_("code",[t._v("boost")]),t._v(" number 默认值"),_("code",[t._v("1")]),t._v(" 应用到该字段中所有关键词的提升权重。"),_("br"),t._v("- "),_("code",[t._v("extractor")]),t._v(" "),_("a",{attrs:{href:"https://lunrjs.com/docs/global.html#fieldExtractor",target:"_blank",rel:"noopener noreferrer"}},[t._v("fieldExtractor"),_("OutboundLink")],1),t._v(" 从文档中提取字段的函数。")])])])]),t._v(" "),_("p",[_("strong",[t._v("报错：")])]),t._v(" "),_("p",[_("code",[t._v("fieldName")]),t._v("不能包含不支持的字符"),_("code",[t._v("/")]),t._v("，否则会抛出"),_("code",[t._v("RangeError")])]),t._v(" "),_("h3",{attrs:{id:"k1-number"}},[_("code",[t._v("k1(number)")])]),t._v(" "),_("p",[t._v("控制项频率上升导致项频率饱和的速度的参数。默认值是1.2。设置一个较高的值会给较慢的饱和度，一个较低的值会导致更快的饱和度。")]),t._v(" "),_("p",[_("strong",[t._v("参数：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("number")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("number")]),t._v(" "),_("td",[t._v("设置的值")])])])]),t._v(" "),_("h3",{attrs:{id:"ref-ref"}},[_("code",[t._v("ref(ref)")])]),t._v(" "),_("p",[t._v("设置用作文档引用的字段。每个文档都必须有这个字段。该字段在文档中的类型应该是字符串，如果不是字符串，则通过调用"),_("code",[t._v("toString")]),t._v("将其强制为字符串。")]),t._v(" "),_("p",[t._v("默认的"),_("code",[t._v("ref")]),t._v("是"),_("code",[t._v("id")]),t._v("。")]),t._v(" "),_("p",[t._v("索引期间不应该更改"),_("code",[t._v("ref")]),t._v("，它应该在任何文档添加到索引之前设置。在索引期间更改它可能会导致结果出现不一致。")]),t._v(" "),_("p",[_("strong",[t._v("参数：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("ref")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),_("td",[t._v("设置的值")])])])]),t._v(" "),_("h3",{attrs:{id:"use-plugin"}},[_("code",[t._v("use(plugin)")])]),t._v(" "),_("p",[t._v("使用插件。")]),t._v(" "),_("p",[t._v("插件为一个函数，以索引构建器(builder)作为上下文调用。插件可以通过某种方式定制或扩展索引的行为。插件封装了构建索引时应该应用的自定义行为。")]),t._v(" "),_("p",[_("code",[t._v("plugin")]),t._v("函数将以索引构建器作为参数调用，在调用"),_("code",[t._v("use")]),t._v("时也可以传递其他参数。该函数将使用索引构建器作为其上下文来调用。")]),t._v(" "),_("p",[_("strong",[t._v("参数：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("plugin")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("function")]),t._v(" "),_("td",[t._v("插件")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);
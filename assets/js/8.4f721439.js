(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{355:function(t,e,_){"use strict";_.r(e);var r=_(43),v=Object(r.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"class-index"}},[t._v("Class: Index")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.Index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("英文原地址"),_("OutboundLink")],1)]),t._v(" "),_("h2",{attrs:{id:"lunr-index-attrs"}},[t._v("lunr.Index(attrs)")]),t._v(" "),_("div",{staticClass:"language-js line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-js"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Index")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attrs"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("索引包含所有文档的构建索引，并为索引提供查询接口。")]),t._v(" "),_("p",[t._v("通常，"),_("code",[t._v("lunr.Index")]),t._v("的实例不会使用这个构造函数来创建，相反，应该使用"),_("code",[t._v("lunr.Builder")]),t._v("来构建新的索引，或者使用"),_("code",[t._v("lunr.Index.load")]),t._v("来加载以前构建和序列化的索引。")]),t._v(" "),_("p",[_("strong",[t._v("参数：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("attrs")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("object")]),t._v(" "),_("td",[t._v("构建搜索索引的属性："),_("br"),_("br"),t._v("- "),_("code",[t._v("invertedIndex")]),t._v(" Object 用于文档引用的术语/字段的索引。"),_("br"),t._v("- "),_("code",[t._v("fieldVectors")]),t._v(" 字段矢量。"),_("br"),t._v("- "),_("code",[t._v("tokenSet")]),t._v(" "),_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.TokenSet.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.TokenSet"),_("OutboundLink")],1),t._v(" 所有关键词标记的集合。"),_("br"),t._v("- "),_("code",[t._v("fields")]),t._v(" 索引文档字段的名称。"),_("br"),t._v("- "),_("code",[t._v("pipeline")]),t._v(" "),_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.Pipeline.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.Pipeline"),_("OutboundLink")],1),t._v(" 搜索关键词的管道。")])])])]),t._v(" "),_("h2",{attrs:{id:"方法"}},[t._v("方法")]),t._v(" "),_("h3",{attrs:{id:"load-serializedindex-→-lunr-index"}},[_("code",[t._v("load(serializedIndex) → {lunr.Index}")]),t._v(" "),_("Badge",{attrs:{text:"static"}})],1),t._v(" "),_("p",[t._v("加载之前序列化的"),_("code",[t._v("lunr.Index")]),t._v("。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("serializedIndex")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("Object")]),t._v(" "),_("td",[t._v("之前序列化的"),_("code",[t._v("lunr.Index")])])])])]),t._v(" "),_("h3",{attrs:{id:"query-fn-→"}},[_("code",[t._v("query(fn) → {}")])]),t._v(" "),_("p",[t._v("使用生成的"),_("code",[t._v("lunr.Query")]),t._v("对象对索引执行查询。")]),t._v(" "),_("p",[t._v("如果对索引执行编程查询，则此方法优于"),_("code",[t._v("lunr.Index#search")]),t._v("，从而避免额外的查询解析开销。")]),t._v(" "),_("p",[t._v("生成的查询对象传入提供的函数，该函数用于表示针对索引运行的查询。")]),t._v(" "),_("p",[t._v("注意，尽管这个函数接受一个回调参数，但这并不是异步操作，该回调仅仅是乘车一个自定义的查询对象而已。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("fn")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.Index.html#~queryBuilder",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.Index~queryBuilder"),_("OutboundLink")],1)]),t._v(" "),_("td",[t._v("用于构建查询的函数。")])])])]),t._v(" "),_("h3",{attrs:{id:"search-querystring-→"}},[_("code",[t._v("search(queryString) → {}")])]),t._v(" "),_("p",[t._v("使用"),_("code",[t._v("lunr")]),t._v("查询语法对索引执行搜索。")]),t._v(" "),_("p",[t._v("结果将按权重分数排序返回，最相关的结果将最先返回。有关如何计算权重分数的详细信息，请参阅"),_("a",{attrs:{href:"https://lunrjs.com/guides/searching.html#scoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("指南"),_("OutboundLink")],1),t._v("。")]),t._v(" "),_("p",[t._v("要进行更程序化的查询，请使用"),_("code",[t._v("lunr.Index#query")]),t._v("。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("queryString")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.Index.html#~queryBuilder",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.Index~queryBuilder"),_("OutboundLink")],1)]),t._v(" "),_("td",[t._v("包含了 lunr 查询语句的字符串。")])])])]),t._v(" "),_("p",[t._v("如果传入的查询字符串无法解析则返回"),_("code",[t._v("lunr.QueryParseError")]),t._v("错误。")]),t._v(" "),_("h3",{attrs:{id:"tojson-→-object"}},[_("code",[t._v("toJSON() → {Object}")])]),t._v(" "),_("p",[t._v("为 JSON 序列化准备索引。")]),t._v(" "),_("p",[t._v("这个 JSON blob 的 schema 将于一个单独的 JSON schema 文件中描述。")]),t._v(" "),_("h2",{attrs:{id:"类型定义"}},[t._v("类型定义")]),t._v(" "),_("h3",{attrs:{id:"querybuilder-query"}},[_("code",[t._v("queryBuilder(query)")])]),t._v(" "),_("p",[t._v("查询生成器回调提供一个查询对象，用以表示要在索引上执行的查询。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("query")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.Query.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.Query"),_("OutboundLink")],1)]),t._v(" "),_("td",[t._v("要构建的查询对象。")])])])]),t._v(" "),_("h3",{attrs:{id:"querystring"}},[_("code",[t._v("QueryString")])]),t._v(" "),_("p",[t._v("尽管"),_("code",[t._v("lunr")]),t._v("提供了使用"),_("code",[t._v("lunr.Query")]),t._v("创建查询的能力，但它还提供了一种简单的查询语言，该语言本身可以解析为"),_("code",[t._v("lunr.Query")]),t._v("的一个实例。")]),t._v(" "),_("p",[t._v("对于以编程方式构建的查询，建议直接使用"),_("code",[t._v("lunr.Query")]),t._v("，查询语言最好用于人类输入的文本，而不是程序生成的文本。")]),t._v(" "),_("p",[t._v("它最简单的查询可以只是单个的关键词，例如，“hello”。同时也支持多个关键词，并使用"),_("code",[t._v("OR")]),t._v("进行合并，例如“hello world”将匹配包含“hello”或“world”的文档，尽管包含两个词的结果排名更高。")]),t._v(" "),_("p",[t._v("关键词中可以包含通配符来匹配一个或多个未指定的字符，这些通配符可以插入其中的任何位置，单个关键词中可以存在多个通配符。添加通配符会增加要找到的文档数量，但也可能对查询性能产生负面影响，特别是在词汇开头使用通配符的时候。")]),t._v(" "),_("p",[t._v("关键词可以被限制为特定的字段，如“title:hello”，只有在"),_("code",[t._v("title")]),t._v("字段中有关键词“hello”的文档才会匹配此次查询。使用索引中不存在的字段将导致错误。")]),t._v(" "),_("p",[t._v("也可以将修饰器添加到关键词中，lunr 支持编辑关键词的距离和权重提升。一个关键词的权重提升会使该匹配关键词文档拥有更高的得分，比如“foo^5”。编辑距离也支持模糊匹配。举个例子，“hello~2” 将匹配带有“hello”的编辑距离为"),_("code",[t._v("2")]),t._v("的文档。应该避免过大的编辑距离值，以免影响查询性能。")]),t._v(" "),_("p",[t._v("每个关键词还支持一个状态修饰符。默认情况下，关键词在文档中的存在是可选，但是可以更改为必需或禁止。关键词的必需状态的设定需要在文档中的这个词使用"),_("code",[t._v("+")]),t._v("前缀, 如"),_("code",[t._v("+foo bar")]),t._v("是要求搜索的文档必须包含"),_("code",[t._v("foo")]),t._v("和可选包含"),_("code",[t._v("bar")]),t._v("。反过来"),_("code",[t._v("-")]),t._v("则是设置禁止该关键词存在,即不能出现在一个文档中,例如"),_("code",[t._v("-foo bar")]),t._v("是要求搜索的文档不包含"),_("code",[t._v("foo")]),t._v("但可能包含"),_("code",[t._v("bar")]),t._v("。")]),t._v(" "),_("p",[t._v("我们可以使用反斜杠字符"),_("code",[t._v("\\")]),t._v("转义特殊字符，这允许搜索包括通常被认为是修饰符的字符，例如"),_("code",[t._v("foo\\~2")]),t._v("将搜索关键词"),_("code",[t._v("foo~2")]),t._v("，而不是搜索关键词"),_("code",[t._v("foo")]),t._v("时将其权重提升到"),_("code",[t._v("2")]),t._v("。")]),t._v(" "),_("h4",{attrs:{id:"示例"}},[t._v("示例")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("查询")]),t._v(" "),_("th",[t._v("示例")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("简单关键词查询")]),t._v(" "),_("td",[_("code",[t._v("hello")])])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("多关键词查询")]),t._v(" "),_("td",[_("code",[t._v("hello world")])])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("字段限定关键词查询")]),t._v(" "),_("td",[_("code",[t._v("title:hello")])])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("关键词权重为10")]),t._v(" "),_("td",[_("code",[t._v("hello^10")])])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("关键词编辑距离为2")]),t._v(" "),_("td",[_("code",[t._v("hello~2")])])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("带有状态修饰符的关键词")]),t._v(" "),_("td",[_("code",[t._v("-foo +bar baz")])])])])]),t._v(" "),_("h4",{attrs:{id:"结果"}},[t._v("结果")]),t._v(" "),_("p",[t._v("结果为包含匹配搜索查询文档的详细信息的对象。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("对象属性名")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("ref")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),_("td",[t._v("表示文档的引用。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("code",[t._v("score")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("number")]),t._v(" "),_("td",[_("code",[t._v("0")]),t._v("到"),_("code",[t._v("1")]),t._v("之间的数字，表示该文档与查询的相似程度。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("matchData")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("a",{attrs:{href:"https://lunrjs.com/docs/lunr.MatchData.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("lunr.MatchData"),_("OutboundLink")],1)]),t._v(" "),_("td",[t._v("对于此次匹配的元数据，包括关键词。")])])])])])}),[],!1,null,null,null);e.default=v.exports}}]);
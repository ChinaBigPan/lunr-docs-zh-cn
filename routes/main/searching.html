<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>搜索 | Lunr.js</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/lunr-docs-zh-cn/images/favicon.ico">
    <meta name="description" content="Lunr.js 是轻量级 JavaScript 全文搜索引擎。它为文档建立索引，并提供简单的搜索界面来检索与文本查询最匹配的文档，对于一些小型的博客、开发者文档来说，可以实现站内离线搜索。">
    <link rel="preload" href="/lunr-docs-zh-cn/assets/css/0.styles.d25ae90b.css" as="style"><link rel="preload" href="/lunr-docs-zh-cn/assets/js/app.d682e2b2.js" as="script"><link rel="preload" href="/lunr-docs-zh-cn/assets/js/2.c7b6054d.js" as="script"><link rel="preload" href="/lunr-docs-zh-cn/assets/js/26.0a54ae76.js" as="script"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/10.027fca5a.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/11.b76c4053.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/12.25126b6b.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/13.c2f3898b.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/14.51177117.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/15.d7449f45.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/16.457f874f.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/17.17070af4.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/18.6096d50c.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/19.4af4351d.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/20.9f382b23.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/21.a43ca3a1.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/22.b3603340.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/23.9601b92b.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/24.d0cf9a0e.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/25.308cb7b8.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/27.23590c81.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/3.efba7a2d.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/4.7351e2e0.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/5.f1d27eb4.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/6.3569bd4e.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/7.7e81c626.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/8.4f721439.js"><link rel="prefetch" href="/lunr-docs-zh-cn/assets/js/9.bdefc8c8.js">
    <link rel="stylesheet" href="/lunr-docs-zh-cn/assets/css/0.styles.d25ae90b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lunr-docs-zh-cn/" class="home-link router-link-active"><img src="/lunr-docs-zh-cn/images/logo.png" alt="Lunr.js" class="logo"> <span class="site-name can-hide">Lunr.js</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.febeacon.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大笑文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/lunr-docs-zh-cn/" class="nav-link">
  文档首页
</a></div><div class="nav-item"><a href="/lunr-docs-zh-cn/routes/api/" class="nav-link">
  API
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.febeacon.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大笑文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/lunr-docs-zh-cn/" class="nav-link">
  文档首页
</a></div><div class="nav-item"><a href="/lunr-docs-zh-cn/routes/api/" class="nav-link">
  API
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lunr-docs-zh-cn/routes/main/" class="sidebar-link">开始</a></li><li><a href="/lunr-docs-zh-cn/routes/main/core_concepts.html" class="sidebar-link">核心概念</a></li><li><a href="/lunr-docs-zh-cn/routes/main/searching.html" class="active sidebar-link">搜索</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lunr-docs-zh-cn/routes/main/searching.html#匹配得分-scoring" class="sidebar-link">匹配得分(scoring)</a></li><li class="sidebar-sub-header"><a href="/lunr-docs-zh-cn/routes/main/searching.html#通配符-wildcards" class="sidebar-link">通配符(wildcards)</a></li><li class="sidebar-sub-header"><a href="/lunr-docs-zh-cn/routes/main/searching.html#字段-fields" class="sidebar-link">字段(fields)</a></li><li class="sidebar-sub-header"><a href="/lunr-docs-zh-cn/routes/main/searching.html#权重提升-boosts" class="sidebar-link">权重提升(boosts)</a></li><li class="sidebar-sub-header"><a href="/lunr-docs-zh-cn/routes/main/searching.html#模糊匹配-fuzzy-matches" class="sidebar-link">模糊匹配(fuzzy matches)</a></li><li class="sidebar-sub-header"><a href="/lunr-docs-zh-cn/routes/main/searching.html#指定关键词-term-presence" class="sidebar-link">指定关键词(term presence)</a></li></ul></li><li><a href="/lunr-docs-zh-cn/routes/main/upgrading.html" class="sidebar-link">版本迁移</a></li><li><a href="/lunr-docs-zh-cn/routes/main/prebuilding_indexes.html" class="sidebar-link">预构建索引</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="搜索">搜索</h1> <p><a href="https://lunrjs.com/guides/searching.html" target="_blank" rel="noopener noreferrer">英文原地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>在构建了文档索引之后，就要实际执行搜索了。</p> <p>最简单的方法是将你想要搜索的文本传递到搜索方法中:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样就会返回所有匹配关键词“foo”的所有文档的细节了。尽管它看起来像字符串，但是<code>search</code>方法将该字符串解析为一个搜索查询。它支持定义更复杂查询的特殊语法。</p> <p>它还支持搜索多个关键词。如果一个文档匹配了<strong>至少</strong>一个搜索关键词，那么就会显示在结果中。搜索关键词之间使用<code>空格</code>连接。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'foo bar'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面的示例将匹配包含“foo”或“bar”的文档。同时包含这两个关键词的文档将获得更高的<code>score</code>分，且在结果中位列前茅。</p> <h2 id="匹配得分-scoring">匹配得分(scoring)</h2> <p>文档的匹配得分(也称为相关性)是由<a href="https://en.wikipedia.org/wiki/Okapi_BM25" target="_blank" rel="noopener noreferrer">BM25<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>算法计算的，此外还受<a href="https://lunrjs.com/guides/searching.html#Boosts" target="_blank" rel="noopener noreferrer">权重提升<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>因素的影响。您无需过多地关心 BM25 如何实现的细节；总之，搜索词在<strong>单个文档</strong>中出现的次数越多，该词对文档得分增加的贡献就越多，但是搜索词在<strong>整个文档集合</strong>中出现的次数越多，该词对文档得分增加的贡献就越少。</p> <p>举个例子，假设您正在为一组关于 JavaScript 测试库的文档建立索引。那么关键词“JavaScript”、“库”和“测试”在整个集合中就可能经常出现，因此找到一个提到这些关键词之一的文档并不是很重要。但是如果您搜索的是“集成测试”，则集合中只有三个文档中出现了关键词“集成”，其中之一多次提到，那么这个文档的得分就是最高的。</p> <h2 id="通配符-wildcards">通配符(wildcards)</h2> <p>Lunr 在执行搜索时指出通配符。通配符表示为星号(*)，它可以出现在搜索关键词中的任何位置。例如，下面的代码匹配所有以“foo”开头的文档：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'foo*'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>下面的代码匹配所有以“oo”结尾的文档：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'*oo'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如上面的示例所示的前置通配符应该谨慎使用。它们会对搜索性能产生负面影响，特别是在大型搜索中。</p> <p>最后，通配符可以位于关键词的中间。下面代码将匹配任何包含以“f”开头、以“o”结尾的术语的文档:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'f*o'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>还值得注意的是，当搜索关键词包含通配符时，不会对其执行词干分析。</p> <h2 id="字段-fields">字段(fields)</h2> <p>默认情况，Lunr 将搜索文档中查询关键词的所有字段，并且将关键字限制在特定字段中。下面是在字段<code>title</code>中搜索<code>&quot;foo&quot;</code>关键词的示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'title:foo'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>搜索关键词以字段名称为前缀，后面跟冒号(<code>:</code>)。该字段必须是构建索引时定义的字段之一。未识别的字段将报错。</p> <p>基于字段的搜索可以与所有其他关键词修饰符、通配符以及其他关键词进行组合。例如，要搜索<code>title</code>中以<code>foo</code>开头的单词或在任何字段中以<code>&quot;bar&quot;</code>开头的单词，可以使用以下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'title:foo* bar'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="权重提升-boosts">权重提升(boosts)</h2> <p>在多个关键词搜索中，其中一个可能比其他词要重要一些。对这种情况，Lunr 支持长期关键词等级提升。任何同提升的关键词匹配的文档都会获得更高的相关性分数，并在结果中出现在更高的位置。我们可以在关键词中插入(<code>^</code>)符号和一个正整数来实现。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'foo^10 bar'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在上面的例子中，搜索关键词<code>&quot;foo&quot;</code>的权重是<code>&quot;bar&quot;</code>的<code>10</code> 倍。提升倍数可以是任意正整数，不同的关键词可以有不同的值：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'foo^10 bar^5 baz'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="模糊匹配-fuzzy-matches">模糊匹配(fuzzy matches)</h2> <p>Lunr 支持在文档中进行关键词模糊匹配搜索，如果我们不清楚一个词的拼写则可以这么做，或者可以增加返回的搜索结果的数量。搜索时允许的模糊量也可以控制。模糊性是通过向关键词添加波浪号(<code>~</code>)和一个<strong>正整数</strong>来实现的。下面的代码搜索匹配所有文档中拥有<code>&quot;foo&quot;</code>相关<code>1</code>个单位编辑距离的文档:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'foo~1'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>编辑距离为<code>1</code>意味着在添加、删除、更改或调换单词中的<code>1</code>个字符也会触发匹配行为。例如，“boo”会触发匹配因为它需要<code>1</code>次编辑(用“b”替换“f”)，但是“boot”不需要，因为它还需要在末尾加上一个“t”。</p> <h2 id="指定关键词-term-presence">指定关键词(term presence)</h2> <p>默认情况下，Lunr 使用逻辑或<code>OR</code>将搜索中的多个术语组合起来。也就是说，搜索“foo bar”将匹配包含“foo”或包含“bar”或两者都包含的文档。我们可以使用关键词级别来控制，也就是说，可以指定匹配文档中每个关键词的存在情况。默认情况下每个关键词在匹配的文档中都是可配置的，但是必须至少存在一个匹配关键词。我们可以指定关键词<strong>必须</strong>或<strong>必须不</strong>在匹配的文档中出现。</p> <p>为了表示某个关键词必须出现在匹配的文档中，该关键词的前缀应该是加号(+);为了表示某个术语必须不存在，该术语的前缀应该是减号(-)。如果没有前缀，则该关键词在匹配文档中的存在与否并不强制。</p> <p>下面的示例表示搜索<strong>必须包含</strong>“foo”，<strong>可能包含</strong>“bar”和<strong>必须不</strong>包含“baz”的文档:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">&quot;+foo bar -baz&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>模拟逻辑和<code>AND</code>搜索必须存在两个术语<code>“foo 和 bar”</code>的文档:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>idx<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">&quot;+foo +bar&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lunr-docs-zh-cn/routes/main/core_concepts.html" class="prev">
        核心概念
      </a></span> <span class="next"><a href="/lunr-docs-zh-cn/routes/main/upgrading.html">
        版本迁移
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lunr-docs-zh-cn/assets/js/app.d682e2b2.js" defer></script><script src="/lunr-docs-zh-cn/assets/js/2.c7b6054d.js" defer></script><script src="/lunr-docs-zh-cn/assets/js/26.0a54ae76.js" defer></script>
  </body>
</html>
